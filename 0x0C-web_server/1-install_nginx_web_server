#!/usr/bin/env bash
# Install nginx on my web01 server
# Nginx should be listening on port 80
# When sent a GET request at root, return a page that contains at least
# one string "Hello World"

# install nginx
apt-get -y install nginx
# allow only http on port 80
ufw allow 'Nginx HTTP'

# enable nginx
service nginx enable
service nginx start

# file config
mkdir -p /var/www/krummitz.com/html
touch /var/www/krummitz.com/html/index.html
echo "<h1>Hello World!</h1>" > /var/www/krummitz.com/html/index.html

# create sever block
touch /etc/nginx/sites-available/krummitz.com
cp /etc/nginx/sites-available/default /etc/nginx/sites-available/krummitz.com

# enable
ln -s /etc/nginx/sites-available/krummitz.com /etc/nginx/sites-enabled/

# restart
service nginx restart